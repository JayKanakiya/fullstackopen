{"version":3,"sources":["services/person.js","App.js","index.js"],"names":["baseUrl","services_person","req","axios","get","console","log","then","response","data","object","post","id","put","concat","delete","Persons","props","filteredNames","persons","showResults","filter","person","name","toLowerCase","includes","react_default","a","createElement","map","key","number","onClick","deleteP","Filter","value","onChange","filterChange","PersonForm","onSubmit","addDetails","newName","handleChange","newNumber","handleNumberChange","type","Notification","m","message","category","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","useEffect","personService","initPerson","_useState3","_useState4","setNewName","_useState5","_useState6","setNumber","_useState7","_useState8","setResults","_useState9","_useState10","errorMessage","setErrorMessage","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","findIndex","window","confirm","find","obj","newP","mess","setTimeout","objectSpread","newPers","catch","error","App_Persons","p","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d3c88712.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const req = axios.get(baseUrl)\n    console.log(req)\n    return req.then(\n        response => response.data\n    )\n}\n\nconst create = (object) => {\n    const req = axios.post(baseUrl,object)\n    return req.then(\n        response=>response.data\n    )\n}\n\nconst update = (id,object) => {\n    const req = axios.put(`${baseUrl}/${id}`, object)\n    return req.then(\n        response=>response.data\n    )\n}\n\nconst deletePerson = (id) => {\n    const req = axios.delete(`${baseUrl}/${id}`)\n    return req.then(\n        response => response.data\n    )\n}\n\nexport default {\n    getAll: getAll, \n    create: create, \n    update: update,\n    deletePerson: deletePerson\n}\n\n\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport personService from './services/person'\nimport './index.css'\n\n\n\nconst Persons = (props) => {\n\tvar filteredNames = props.persons\n\tif(props.showResults){\n\t\tfilteredNames = props.persons.filter(person => person.name.toLowerCase().includes(props.showResults.toLowerCase()))\n\t}\n\tconst disp = () => filteredNames.map(person=>\n\t\t\t<li key={person.name}> {person.name} {person.number} <button onClick={()=> props.deleteP(person.id)}>delete</button></li>\n\t)\n\treturn (\n\n\t\t<ul>{disp()}</ul>\n\t)\n\n}\n\nconst Filter = (props) => {\n\treturn (\n\t\t<div>\n\t\t  filter shown with <input\n\t\t\tvalue={props.showResults}\n\t\t\tonChange = {props.filterChange}\n\t\t  />\n\t  </div>\n\t)\n}\n\nconst PersonForm = (props) => {\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={props.addDetails}>\n\t\t\t\t<div>\n\t\t\t\tname: <input\n\t\t\t\t\t\tvalue={props.newName}\n\t\t\t\t\t\tonChange={props.handleChange} \n\t\t\t\t\t\t/> <br/>\n\t\t\t\tnumber: <input \n\t\t\t\t\t\tvalue={props.newNumber}\n\t\t\t\t\t\tonChange = {props.handleNumberChange}\n\t\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t\t</div>\n     \t\t</form>\n\t\t</div>\n\t)\n}\n\nconst Notification = (props) => {\n\tif(props.m.message === null){\n\t\treturn null\n\t}\n\tif(props.m.category === \"success\"){\n\t\treturn(\n\t\t\t<div className=\"success\">\n\t\t\t\t{props.m.message}\n\t\t\t</div>\n\t\t)\n\t}\n\treturn(\n\t\t<div className=\"error\">\n\t\t\t{props.m.message}\n\t\t</div>\n\t)\n\t\n}\n\nconst App = () => {\n\tconst [ persons, setPersons] = useState([])\n\tuseEffect(()=> {\n\t\tpersonService.getAll().then(initPerson => {\n\t\t\tsetPersons(initPerson)\n\t\t})\n\t},[])\n   \n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNumber] = useState('')\n  const [showResults, setResults] = useState('')\n  const [errorMessage, setErrorMessage] = useState({\n\t  message: null,\n\t  category: null\n  })\n \n  const addDetails = (event) => {\n\t  event.preventDefault()\n\t//   console.log(event.target)\n\t\n\t\t// console.log(persons[1]);\n\n\t\tif(persons.findIndex(person => person.name === newName) > -1 ){\n\t\t\tif(window.confirm(newName + ' is already added phonebook, replace the old number with new one?')){\n\t\t\t\tconst id = persons.find(person=>person.name===newName).id\n\t\t\t\tconst obj = {\n\t\t\t\t\tname: newName,\n\t\t\t\t\tnumber: newNumber,\n\t\t\t\t}\n\t\t\t\tpersonService\n\t\t\t\t.update(id, obj)\n\t\t\t\t.then(newP => {\n\t\t\t\t\tconst mess = {\n\t\t\t\t\t\tmessage: `Added ${newP.name}`,\n\t\t\t\t\t\tcategory: 'success'\n\t\t\t\t\t}\n\t\t\t\t\tsetErrorMessage(mess)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\n\t\t\t\t\t}, 5000)\n\t\t\t\t\tconst newPers = persons.map(person=> person.id!==id ? person : newP)\n\t\t\t\t\tsetPersons(newPers)\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.catch(error=>{\n\t\t\t\t\t\n\t\t\t\t\tconst mess = {\n\t\t\t\t\t\tmessage: `${obj.name} has already been removed from the database `,\n\t\t\t\t\t\tcategory: 'error'\n\t\t\t\t\t}\n\t\t\t\t\tsetErrorMessage(mess)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tconst obj = {\n\t\t\t\tname: newName,\n\t\t\t\tnumber: newNumber\n\t\t\t}\n\t\t\t// console.log(persons)\n\t\t\t// console.log(obj)\t\n\t\t\tpersonService\n\t\t\t\t.create(obj)\n\t\t\t\t.then(newP => {\n\n\t\t\t\t\tconst mess = {\n\t\t\t\t\t\tmessage: `Added ${newP.name}`,\n\t\t\t\t\t\tcategory: 'success'\n\t\t\t\t\t}\n\t\t\t\t\tsetErrorMessage(mess)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\n\t\t\t\t\t}, 5000)\n\t\t\t\t\tsetPersons(persons.concat(newP))\n\t\t\t\t\tsetNewName('')\n\t\t\t\t\tsetNumber('')\n\t\t\t\t})\n\t\t\t\t.catch(error=>{\n\t\t\t\t\t// console.log(error.respon.data.error)\n\t\t\t\t\tconst mess = {\n\t\t\t\t\t\tmessage: error.response.data.error,\n\t\t\t\t\t\tcategory: 'error'\n\t\t\t\t\t}\n\t\t\t\t\tsetErrorMessage(mess)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t\t\n\t\t}\n\t\n  }\n\n  const deletePersonHandler  = (id) => {\n\t\tconst p = persons.find( person => person.id === id)\n\t\tif(window.confirm(`Delete ${p.name} ?`)){\n\t\t\tpersonService\n\t\t\t\t.deletePerson(id)\n\t\t\t\t.then(response => {\n\t\t\t\t\tsetPersons(persons.filter(person=>person.id!==id))\n\t\t\t\t})\n\t\t}\n  }\n  const handleChange = (event) => {\n\t//   console.log(event.target.value)\n\t  setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n\t//   console.log(event.target.value)\n\t  setNumber(event.target.value)\n  }\n  const filterChange = (event) => {\n\t  setResults(event.target.value)\n  }\n\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n\t  <Notification m={errorMessage} />\n\t  <Filter showResults={showResults} filterChange={filterChange} />\n\t  <h2>add a new </h2>\n      <PersonForm addDetails={addDetails} newName={newName} handleChange={handleChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} showResults={showResults} deleteP={deletePersonHandler} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}